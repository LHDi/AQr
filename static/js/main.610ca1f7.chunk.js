(window.webpackJsonpaqr=window.webpackJsonpaqr||[]).push([[0],{10:function(e,t,n){e.exports=n(19)},15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),i=n.n(c),s=(n(15),n(16),n(3)),o=n.n(s),u=n(5),l=n(4),d=n(1),m=n(6);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}window.adapter=n(18);var f=[[640,480,"480p - 4:3"],[1280,720,"720p - 16:9"],[1920,1080,"1080p - 16:9"]],v=function(e){var t=e.height,n=e.width;return f.filter((function(e){return e[0]>=n.min&&e[0]<=n.max&&e[1]>=t.min&&e[1]<=t.max})).map((function(e){return{label:e[2],width:e[0],height:e[1]}}))};var g=function(e,t){var n=e.cameraList,r=e.selected,a=t.type,c=t.id,i=t.list;switch(a){case"SET_LIST":return{cameraList:i,selected:i[0].deviceId};case"SELECT":return{cameraList:Object(m.a)(n),selected:c};default:return{cameraList:Object(m.a)(n),selected:r}}},b=function(e,t){var n=e.stream,r=e.constraints,a=e.permitted,c=e.selectedConstraints,i=t.type,s=t.newstream,o=t.newConstraints,u=t.newSelectedConstraint;switch(i){case"SET_STREAM":return{stream:s,permitted:!0,constraints:o,selectedConstraints:u};case"SET_STREAM_CONS":return console.log(n),n.getVideoTracks()[0].applyConstraints(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u)),{stream:n,permitted:a,constraints:r,selectedConstraints:u};case"RESET_STREAM":return{stream:null,permitted:!1,constraints:[],selectedConstraints:null};default:return{stream:n,permitted:a,constraints:r,selectedConstraints:c}}},w=function(e){var t=e.children,n=Object(r.useReducer)(g,{cameraList:[],selected:null}),c=Object(l.a)(n,2),i=c[0],s=i.selected,d=i.cameraList,m=c[1],p=Object(r.useReducer)(b,{stream:null,permitted:!1,constraints:[],selectedConstraints:null}),f=Object(l.a)(p,2),w=f[0],E=w.stream,h=w.permitted,O=w.constraints,j=w.selectedConstraints,S=f[1],y=Object(r.useState)(null),k=Object(l.a)(y,2),C=k[0],T=k[1],x=Object(r.useCallback)((function(){T(null),E&&E.getTracks().forEach((function(e){return e.stop()}))}),[E]);return Object(r.useEffect)((function(){return function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("mediaDevices"in navigator&&"enumerateDevices"in navigator.mediaDevices)){e.next=14;break}return e.prev=1,e.next=4,navigator.mediaDevices.enumerateDevices();case 4:t=e.sent,n=[],t.forEach((function(e){if("videoinput"===e.kind){var t={label:e.label,deviceId:e.deviceId};n.push(t)}})),m({type:"SET_LIST",list:n}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),T(new Error("Camera Error!"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}()(),x}),[h]),Object(r.useEffect)((function(){var e=d.length&&s?s:void 0;if(e)return function(){var t=Object(u.a)(o.a.mark((function t(){var n,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)||!e){t.next=16;break}return t.prev=1,t.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:e.deviceId}}});case 4:n=t.sent,r=n.getTracks()[0].getCapabilities?v(n.getTracks()[0].getCapabilities()):[],a=n.getTracks()[0].getSettings?n.getTracks()[0].getSettings():null,S({type:"SET_STREAM",newstream:n,newConstraints:r,newSelectedConstraint:a}),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),console.error(t.t0),t.abrupt("return",T(new Error("Please allow us to use the camera.")));case 14:t.next=17;break;case 16:return t.abrupt("return",T(new Error("No camera device was found!")));case 17:case 18:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}()(),x}),[s]),C?a.a.createElement("span",null,C.message):a.a.createElement(a.a.Fragment,null,!!d.length&&s&&a.a.createElement(a.a.Fragment,null,a.a.createElement("select",{onChange:function(e){m({type:"SELECT",id:e.target.value}),console.log(E)}},d.map((function(e){return a.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)}))),j&&j.width,!!O.length&&a.a.createElement("select",{onChange:function(e){return S({type:"SET_STREAM_CONS",newSelectedConstraint:O[e.target.value]})}},O.map((function(e,t){return a.a.createElement("option",{key:e.label,value:t},e.label)})))),t({stream:E}))},E=function(e){var t=e.stream,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){t&&(n.current.srcObject=t)}),[t]),a.a.createElement("div",null,a.a.createElement("video",{ref:n,autoPlay:!0}))};var h=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,null,(function(e){var t=e.stream;return a.a.createElement(E,{stream:t})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.610ca1f7.chunk.js.map