(window.webpackJsonpaqr=window.webpackJsonpaqr||[]).push([[0],{10:function(e,t,n){e.exports=n(19)},15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),i=n.n(c),s=(n(15),n(16),n(3)),o=n.n(s),l=n(5),u=n(4),d=n(1),m=n(6),p=function(e){var t=e.cameraList,n=e.selectedCameraId,r=e.selectCamera;return a.a.createElement("div",null,a.a.createElement("select",{defaultValue:n,onChange:function(e){return r(e.target.value)}},t.map((function(e){return a.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)}))))},v=function(e){var t=e.constraints,n=e.selectedConstraint,r=e.selectConstraint;return a.a.createElement("div",null,!!t.length&&a.a.createElement("select",{value:t.findIndex((function(e){return e.width===n.width})),onChange:function(e){return r(t[e.target.value])}},t.map((function(e,t){return a.a.createElement("option",{key:e.label,value:t},e.label)}))))},f=function(e){var t=e.streamProps,n=e.cameraProps;return a.a.createElement("div",null,a.a.createElement(p,n),a.a.createElement(v,t))};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}window.adapter=n(18);var b=[[640,480,"480p - 4:3"],[1280,720,"720p - 16:9"],[1920,1080,"1080p - 16:9"]],E=function(e){var t=e.height,n=e.width;return b.filter((function(e){return e[0]>=n.min&&e[0]<=n.max&&e[1]>=t.min&&e[1]<=t.max})).map((function(e){return{label:e[2],width:e[0],height:e[1]}}))};var h=function(e,t){var n=e.cameraList,r=e.selectedCameraId,a=t.type,c=t.id,i=t.list;switch(a){case"SET_LIST":return{cameraList:i,selectedCameraId:i[0].deviceId};case"SELECT":return{cameraList:Object(m.a)(n),selectedCameraId:c};default:return{cameraList:Object(m.a)(n),selectedCameraId:r}}},w=function(e,t){var n=e.stream,r=e.constraints,a=e.permitted,c=e.selectedConstraint,i=t.type,s=t.newstream,o=t.newConstraints,l=t.newSelectedConstraint;switch(i){case"SET_STREAM":return{stream:s,permitted:!0,constraints:o,selectedConstraint:l};case"SET_STREAM_CONS":return n.getVideoTracks()[0].applyConstraints(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l)),{stream:n,permitted:a,constraints:r,selectedConstraint:l};case"RESET_STREAM":return{stream:null,permitted:!1,constraints:[],selectedConstraint:null};default:return{stream:n,permitted:a,constraints:r,selectedConstraint:c}}},C=function(e){var t=e.children,n=Object(r.useReducer)(h,{cameraList:[],selectedCameraId:null}),c=Object(u.a)(n,2),i=c[0],s=i.selectedCameraId,d=i.cameraList,m=c[1],p=Object(r.useReducer)(w,{stream:null,permitted:!1,constraints:[],selectedConstraint:null}),v=Object(u.a)(p,2),g=v[0],b=g.stream,C=g.permitted,O=g.constraints,y=g.selectedConstraint,j=v[1],S=Object(r.useState)(null),k=Object(u.a)(S,2),T=k[0],I=k[1],x=Object(r.useCallback)((function(){I(null),b&&b.getTracks().forEach((function(e){return e.stop()}))}),[b]);return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("mediaDevices"in navigator&&"enumerateDevices"in navigator.mediaDevices)){e.next=13;break}return e.prev=1,e.next=4,navigator.mediaDevices.enumerateDevices();case 4:t=e.sent,n=[],t.forEach((function(e){if("videoinput"===e.kind){var t={label:e.label,deviceId:e.deviceId};n.push(t)}})),m({type:"SET_LIST",list:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),I(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}})()()}),[C]),Object(r.useEffect)((function(){x();var e=d.length&&s?s:void 0;e&&function(){var t=Object(l.a)(o.a.mark((function t(){var n,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)||!e){t.next=16;break}return t.prev=1,t.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:e}}});case 4:n=t.sent,r=n.getTracks()[0].getCapabilities?E(n.getTracks()[0].getCapabilities()):[],a=n.getTracks()[0].getSettings?n.getTracks()[0].getSettings():null,j({type:"SET_STREAM",newstream:n,newConstraints:r,newSelectedConstraint:a}),n.getTracks()[0].applyConstraints({deviceId:{exact:d[1].deviceId}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),I(t.t0);case 14:t.next=17;break;case 16:return t.abrupt("return",I(new Error("No camera device was found!")));case 17:case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}()()}),[s,d.length]),T?a.a.createElement("span",null,T.message):a.a.createElement(a.a.Fragment,null,a.a.createElement(f,{cameraProps:{cameraList:d,selectedCameraId:s,selectCamera:function(e){return m({type:"SELECT",id:e})}},streamProps:{constraints:O,selectedConstraint:y,selectConstraint:function(e){return j({type:"SET_STREAM_CONS",newSelectedConstraint:e})}}}),t({stream:b}))},O=function(e){var t=e.stream,n=e.style,c=Object(r.useRef)(null);return Object(r.useEffect)((function(){t&&(c.current.srcObject=t)}),[t]),a.a.createElement("div",{style:Object.assign({width:"100%",height:"100%"},n)},a.a.createElement("video",{ref:c,autoPlay:!0,style:{width:"100%",height:"100%"}}))};var y=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(C,null,(function(e){var t=e.stream;return a.a.createElement(O,{stream:t})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.a3e4dad3.chunk.js.map